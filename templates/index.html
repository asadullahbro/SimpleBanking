<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SimpleBanking Dashboard</title>
    <link rel="stylesheet" href="../static/index.css">
</head>
<body>
    <div class="header">
        <h1>Welcome to SimpleBanking</h1>
        <p>Your trusted partner in managing your finances.</p>
    </div>
    
    <div class="dashboard">
        <div class="welcoming"></div>
        
        <div class="balance-display">
            <div class="balance-label">Current Balance</div>
            <div class="balance-amount">$---</div>
        </div>
        
        <div class="button-grid">
            <button class="view_balance" onclick="getBalance()">View Balance</button>
            <button class="deposit" onclick="showDepositModal()">Deposit</button>
            <button class="withdraw" onclick="showWithdrawModal()">Withdraw</button>
            <button class="details" onclick="showAccDetails()">Show Account Details</button>
            <button class="transfer" onclick="showTransferModal()">Transfer Funds</button>
            <button class="settings-btn" onclick="showSettingsModal()">Settings</button>
            <button class="dashboard-btn" onclick="showTransactionHistory()">Transaction History</button>
            <button class="logout" onclick="logout()">Logout</button>
        </div>
    <!-- Deposit Modal -->
    <div id="depositModal" class="modal">
        <div class="modal-content">
            <h3>Deposit Funds</h3>
            <input type="number" id="depositAmount" placeholder="Enter amount" min="0" step="0.01">
            <div class="modal-buttons">
                <button onclick="hideModal('depositModal')">Cancel</button>
                <button onclick="processDeposit()" style="background: #4ade80; color: white;">Deposit</button>
            </div>
        </div>
    </div>
<!-- Settings Modal -->
<div id="settingsModal" class="modal">
    <div class="modal-content settings-content">
        <h3>Account Settings</h3>
        
        <!-- Option 1: Change Password -->
        <div class="settings-option" onclick="showPasswordForm()">
            <div class="option-icon">üîí</div>
            <div class="option-text">
                <h4>Change Password</h4>
                <p>Update your account password</p>
            </div>
            <div class="option-arrow">‚Ä∫</div>
        </div>
        
        <!-- Option 2: Two-Factor Authentication -->
        <div class="settings-option" onclick="toggle2FA()">
            <div class="option-icon">üîê</div>
            <div class="option-text">
                <h4>Two-Factor Authentication</h4>
                <p id="twoFAStatus">Status: <span id="twoFAStatusText">Off</span></p>
            </div>
            <div class="toggle-container" id="twoFAToggle">
                <div class="toggle-slider"></div>
            </div>
        </div>

        <!-- Password Form (hidden by default) -->
        <div id="passwordForm" class="password-form" style="display: none;">
            <div class="form-header">
                <h4>Change Password</h4>
                <button class="btn-close" onclick="hidePasswordForm()">√ó</button>
            </div>
            <div class="form-group">
                <input type="password" id="currentPassword" placeholder="Current Password">
                <input type="password" id="newPassword" placeholder="New Password">
                <input type="password" id="confirmPassword" placeholder="Confirm New Password">
            </div>
            <div class="form-buttons">
                <button class="btn-primary" onclick="changePassword()">Update Password</button>
            </div>
            <p id="passwordMsg"></p>
        </div>

        <div class="modal-buttons">
            <button class="btn-cancel" onclick="hideModal('settingsModal')">Close</button>
        </div>
    </div>
</div>
</div>
<div id="transactionHistoryModal" class="modal">
    <div class="modal-content history-content">
        <div class="modal-header">
            <h3>Transaction History</h3>
            <button class="btn-close" onclick="hideModal('transactionHistoryModal')">√ó</button>
        </div>
        
        <div class="history-controls">
            <div class="filter-controls">
                <select id="historyFilter" onchange="filterTransactions()" style="background-color: #333; /* Dark background */
    color: white;           /* White text */
    border: 1px solid #555;
    appearance: none;       /* Crucial for custom styling */
    padding: 8px 12px;">
                    <option value="all">All Transactions</option>
                </select>
                
                <select id="historyPeriod" onchange="filterTransactions()" style="background-color: #333; /* Dark background */
    color: white;           /* White text */
    border: 1px solid #555;
    appearance: none;       /* Crucial for custom styling */
    padding: 8px 12px;">
                    <option value="7">Last 7 days</option>
                    <option value="30" selected>Last 30 days</option>
                    <option value="90">Last 90 days</option>
                    <option value="365">Last year</option>
                    <option value="all">All time</option>
                </select>
            </div>
            
            <div class="search-controls">
                <input type="text" 
                       id="historySearch" 
                       placeholder="Search transactions..."
                       onkeyup="filterTransactions()">
                <button onclick="exportTransactions()" class="btn-export">
                    üì• Export
                </button>
            </div>
        </div>
        
        <div class="history-stats">
            <div class="stat-card">
                <span class="stat-label">Total Deposits</span>
                <span class="stat-value" id="totalDeposits">$0.00</span>
            </div>
            <div class="stat-card">
                <span class="stat-label">Total Withdrawals</span>
                <span class="stat-value" id="totalWithdrawals">$0.00</span>
            </div>
            <div class="stat-card">
                <span class="stat-label">Total Transfers</span>
                <span class="stat-value" id="totalTransfers">$0.00</span>
            </div>
            <div class="stat-card">
                <span class="stat-label">Net Change</span>
                <span class="stat-value" id="netChange">$0.00</span>
            </div>
        </div>
        
        <div class="transactions-container" id="fullTransactionsList">
            <!-- Transactions will be loaded here -->
            <div class="loading-history">Loading transactions...</div>
        </div>
        
        <div class="history-pagination" id="historyPagination">
            <!-- Pagination will be added here -->
        </div>
    </div>
</div>
    <!-- Withdraw Modal -->
    <div id="withdrawModal" class="modal">
        <div class="modal-content">
            <h3>Withdraw Funds</h3>
            <input type="number" id="withdrawAmount" placeholder="Enter amount" min="0" step="0.01">
            <div class="modal-buttons">
                <button onclick="hideModal('withdrawModal')">Cancel</button>
                <button onclick="processWithdraw()" style="background: #f87171; color: white;">Withdraw</button>
            </div>
        </div>
    </div>
<div id="twoFAModal" class="modal">
    <div class="modal-content">
        <h3>Two-Factor Authentication (2FA)</h3>
        <p>Scan the QR code below with your authenticator app:</p>
        <img id="qrCode2FA" src="" alt="QR Code will appear here" style="margin-top: 15px;">
        <p>Then enter the 6-digit code from your app:</p>
        <input type="text" id="otp2FA" placeholder="123456" maxlength="6">
        <div class="modal-buttons">
            <button onclick="hideModal('twoFAModal')">Cancel</button>
            <button onclick="verify2FA()" style="background: #facc15; color: white;">Verify & Enable</button>
        </div>
        <p id="msg2FA" style="color: green; font-weight: bold; margin-top: 10px;"></p>
    </div>
</div>
    <!-- Transfer Modal -->
    <div id="transferModal" class="modal">
        <div class="modal-content">
            <h3>Transfer Funds</h3>
            <div class="recipient-info" id="recipientName"></div>
            <input type="text" id="accountNumber" placeholder="Enter Account Number">
            <input type="number" id="transferAmount" placeholder="Enter amount" min="0" step="0.01">
            <div class="modal-buttons">
                <button onclick="hideModal('transferModal')">Cancel</button>
                <button onclick="processTransfer()" style="background: #60a5fa; color: white;">Transfer</button>
            </div>
        </div>
    </div>

    <!-- Transfer Confirmation Modal -->
    <div id="confirmTransferModal" class="modal">
        <div class="modal-content">
            <h3>Confirm Transfer</h3>
            <p id="confirmMessage"></p>
            <div class="modal-buttons">
                <button onclick="hideModal('confirmTransferModal')">Cancel</button>
                <button onclick="confirmTransfer()" style="background: #60a5fa; color: white;">Confirm</button>
            </div>
        </div>
    </div>
    <div id="showAccDetailsModal" class="modal">
        <div class="modal-content">
            <h3>Account Details</h3>
            <p id="accountDetailsContent"></p>
            <div class="modal-buttons">
                <button onclick="hideModal('showAccDetailsModal')">Close</button>
            </div>
        </div>
    </div>

    <div class="footer">
        <p>&copy; 2025 SimpleBanking. All rights reserved.</p>
    </div>

    <script src="/static/index.js">
 </script>
</body>
</html>